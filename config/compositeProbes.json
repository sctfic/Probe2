{
    "THSW_calc": {
        "label": "Température THSW",
        "comment": "Température de Sensibilisation, Thermique, Humidité, Soleil et Vent",
        "fnCalc": "(data) => calcTHSW(data['temperature:outTemp'], data['humidity:outHumidity'], data['irradiance:solar'], data['speed:Wind'])",
        "dataNeeded": [
            "temperature:outTemp",
            "humidity:outHumidity",
            "irradiance:solar",
            "speed:Wind"
        ],
        "scriptJS": [
            "/js/composite/THSW.js"
        ],
        "period": 604800,
        "groupUsage": "1/ Outdoor",
        "groupCustom": "Composites",
        "sensorDb": "THSW_calc",
        "measurement": "temperature"
    },
    "AirWater_calc": {
        "label": "masse d'H2O dans l'air",
        "comment": "masse d'eau par mettre cube d'air (ou g/l)",
        "fnCalc": "(data) => waterInAir( data['temperature:outTemp'], data['humidity:outHumidity'], data['pressure:barometer']\n).g_per_m3",
        "dataNeeded": [
            "temperature:outTemp",
            "humidity:outHumidity",
            "pressure:barometer"
        ],
        "scriptJS": [
            "/js/composite/AirWater.js"
        ],
        "period": 604800,
        "groupUsage": "1/ Outdoor",
        "groupCustom": "Composites",
        "sensorDb": "AirWater_calc",
        "measurement": "density"
    },
    "SUN_V_calc": {
        "label": "Angle vertical du soleil",
        "comment": "calcul de la phase du soleil",
        "fnCalc": "(data, lon=%longitude%, lat=%latitude% , alt=%altitude%) => {\n    const V = SunCalc.getPosition(new Date(data.d), lat, lon).altitudeDegrees;\n        return V > 0 ? Math.round(V*10)/10 : 0;\n}",
        "dataNeeded": [
            "pressure:barometer"
        ],
        "scriptJS": [
            "/js/composite/sunCalc.js"
        ],
        "period": 2592000,
        "groupUsage": "2/ Sun",
        "groupCustom": "Composites",
        "sensorDb": "SUN_V_calc",
        "measurement": "angle"
    },
    "MOON_calc": {
        "label": "Phase de la lune",
        "comment": "calcul de la phase de la lune",
        "fnCalc": "(data, lon=%longitude%, lat=%latitude% , alt=%altitude%) => {\n    const P = SunCalc.getMoonPosition(\n    new Date(data.d), lat, lon).altitudeDegrees;\n    return Math.round(P*10)/10;\n}",
        "dataNeeded": [
            "pressure:barometer"
        ],
        "scriptJS": [
            "/js/composite/sunCalc.js"
        ],
        "period": 2592000,
        "groupUsage": "2/ Sun",
        "groupCustom": "Composites",
        "sensorDb": "MOON_calc",
        "measurement": "angle"
    },
    "test_calc": {
        "label": "Delta InOut",
        "comment": "temp In - Out",
        "fnCalc": "(data, lon=%longitude%, lat=%latitude% , alt=%altitude%) => {\n  if ( data['temperature:inTemp']  && data['temperature:outTemp']  ) {\n     return data['temperature:inTemp'] - data['temperature:outTemp'] ;\n  }\n}",
        "dataNeeded": [
            "temperature:inTemp",
            "temperature:outTemp"
        ],
        "currentMap": {
            "d": "timestamp",
            "temperature:inTemp": "inTemp",
            "temperature:outTemp": "outTemp"
        },
        "scriptJS": [],
        "period": 604800,
        "sensorDb": "test_calc",
        "measurement": "None",
        "groupCustom": "CompositesNew",
        "groupUsage": "Composites"
    }
}